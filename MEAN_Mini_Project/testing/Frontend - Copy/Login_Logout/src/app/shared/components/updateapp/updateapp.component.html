<div *ngIf="showLoader">
  <app-loader></app-loader>
</div>
<div *ngIf="!showLoader" class="container-fluid p-4">
  <h2 class="mb-4">Update App</h2>

  <form [formGroup]="updateForm" (ngSubmit)="save()">
    <div class="form-group mb-3">
      <label for="appname" class="form-label">App Name: </label>
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Name</mat-label>
        <input
          [class.is-invalid]="
            updateForm.get('name')?.invalid && updateForm.get('name')?.touched
          "
          formControlName="name"
          type="text"
          id="appname"
          class="form-control"
          matInput
        />
      </mat-form-field>
      <div
        *ngIf="
          updateForm.get('name')?.invalid && updateForm.get('name')?.touched
        "
      >
        <small
          class="text-danger"
          *ngIf="updateForm.get('name')?.errors?.['required']"
          >Please enter the app name</small
        >
      </div>
    </div>

    <div class="form-group mb-3">
      <label for="file" class="form-label">Upload Image</label>
      <input
        type="file"
        id="file"
        (change)="onFileSelected($event)"
        class="form-control"
      />
    </div>

    <img
      *ngIf="imageSrc"
      [src]="imageSrc"
      alt="Selected Image"
      class="selected-image"
    />

    <div class="form-group mb-3">
      <label for="description" class="form-label">Description: </label>
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Description</mat-label>
        <textarea
          [class.is-invalid]="
            updateForm.get('description')?.invalid &&
            updateForm.get('description')?.touched
          "
          formControlName="description"
          id="description"
          class="form-control"
          matInput
        ></textarea>
      </mat-form-field>
      <div
        *ngIf="
          updateForm.get('description')?.invalid &&
          updateForm.get('description')?.touched
        "
      >
        <small
          class="text-danger"
          *ngIf="updateForm.get('description')?.errors?.['required']"
          >Please enter the description</small
        >
      </div>
    </div>

    <div class="d-flex justify-content-between">
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="!updateForm.valid"
      >
        Submit
      </button>
      <button type="button" class="btn btn-primary" (click)="goBack()">
        Back
      </button>
    </div>
  </form>
</div>
