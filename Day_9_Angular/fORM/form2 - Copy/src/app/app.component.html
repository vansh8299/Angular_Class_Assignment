<div class="container-fluid">
  <h2>Doremon Fan Club Registration Form</h2>

  <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" novalidate>
    <div class="form-group">
      <label>Name: </label>
      <input
        [class.is-invalid]="userName?.invalid && userName?.touched"
        formControlName="userName"
        type="text"
        class="form-control"
      />

      <div *ngIf="userName?.invalid && userName?.touched">
        <small class="text-danger" *ngIf="userName?.errors?.['required']"
          >Please enter the Name</small
        >
        <small class="text-danger" *ngIf="userName?.errors?.['minlength']"
          >Name is of 4 or more characters</small
        >
        <small class="text-danger" *ngIf="userName?.errors?.['duplicateName']"
          >Not allowed</small
        >
      </div>
    </div>

    <div class="form-group">
      <label>Date Of Birth</label>
      <input
        [class.is-invalid]="dob?.invalid && dob?.touched"
        formControlName="dob"
        type="date"
        class="form-control"
      />
      <div *ngIf="dob?.invalid && dob?.touched">
        <small class="text-danger" *ngIf="dob?.errors?.['required']"
          >DOB is required</small
        >
        <small class="text-danger" *ngIf="dob?.errors?.['minAge']"
          >Age Must be greater than 13 years old</small
        >
      </div>
    </div>

    <div class="form-group">
      <label>Gender:</label><br />
      <div class="form-check">
        <input
          class="form-check-input"
          type="radio"
          id="male"
          value="male"
          formControlName="gender"
        />
        <label class="form-check-label" for="male">Male</label>
      </div>
      <div class="form-check">
        <input
          class="form-check-input"
          type="radio"
          id="female"
          value="female"
          formControlName="gender"
        />
        <label class="form-check-label" for="female">Female</label>
      </div>
      <div class="form-check">
        <input
          class="form-check-input"
          type="radio"
          id="other"
          value="other"
          formControlName="gender"
        />
        <label class="form-check-label" for="other">Other</label>
      </div>
      <small
        *ngIf="gender?.errors?.['required'] && gender?.untouched"
        class="text-danger"
        >Gender is required</small
      >
          
    </div>

    <div class="form-group">
      <label>Email</label>

      <input
        formControlName="email"
        [class.is-invalid]="
          registrationForm.controls['email'].invalid &&
          registrationForm.controls['email'].touched
        "
        type="email"
        class="form-control"
      />
      <small
        class="text-danger"
        *ngIf="email?.errors?.['required'] && email?.touched"
        >Email is Required</small
      >
      <small
        *ngIf="email?.errors?.['email'] && email?.touched"
        class="text-danger"
        >Invalid email format.</small
      >
      <small *ngIf="email?.errors?.['invalidDomain']" class="text-danger"
        >Only gmail.com emails are allowed.</small
      >

      <div
        formArrayName="addEmailField"
        *ngFor="let email of addEmailField.controls; let i = index"
      >
        <input type="text" class="form-control my-1" [formControlName]="i" />
      </div>
    </div>

    <div class="form-group">
      <label>Password: </label>
      <input
        [class.is-invalid]="password?.invalid && password?.touched"
        formControlName="password"
        type="password"
        class="form-control"
      />
      <div *ngIf="password?.invalid && password?.touched">
        <small class="text-danger" *ngIf="password?.errors?.['required']"
          >Password is required</small
        >
        <small class="text-danger" *ngIf="password?.errors?.['pattern']"
          >Password must contain 1 uppercase, 1 lowercase and 1
          specialcharacter</small
        >
      </div>
    </div>

    <div class="form-group">
      <label>Confirm Password: </label>
      <input
        [class.is-invalid]="registrationForm.errors?.['misMatch']"
        formControlName="confirmPassword"
        type="password"
        class="form-control"
      />

      <small class="text-danger" *ngIf="registrationForm.errors?.['misMatch']"
        >Password Do not Match</small
      >
      <small
        class="text-danger"
        *ngIf="confirmPassword?.errors?.['required'] && confirmPassword?.touched"
        >Confirm Password is required</small
      >
    </div>

    <div class="form-group">
      <label for="favoriteGadget">Favorite Doraemon Gadget:</label>
      <select
        class="form-control"
        id="favoriteGadget"
        formControlName="favoriteGadget"
      >
        <option value="">Select</option>
        <option value="Anywhere Door">Anywhere Door</option>
        <option value="Bamboo Copter">Bamboo Copter</option>
        <option value="Take-copter">Take-copter</option>
        <option value="Time Machine">Time Machine</option>
      </select>
      <small
        *ngIf="favoriteGadget?.errors?.['required'] && favoriteGadget?.touched"
        class="text-danger"
        >Favorite Gadget is required.</small
      >
    </div>

    <div class="form-group">
      <label for="membershipType">Membership Type:</label>
      <select
        class="form-control"
        id="membershipType"
        formControlName="membershipType"
      >
        <option value="basic">Basic</option>
        <option value="premium">Premium</option>
              
      </select>
    </div>
    <div class="form-group">
      <div class="form-check">
        <input
          class="form-check-input"
          formControlName="notify"
          type="checkbox"
        />
        <label class="form-check-label"
          >Notify me abount Doraemon news and events</label
        >
      </div>
    </div>
    <div class="form-group">
      <label for="communicationMethod">Preferred Communication Method:</label>
      <select
        class="form-control"
        id="communicationMethod"
        formControlName="communicationMethod"
      >
        <option value="email">Email</option>
        <option value="sms">SMS</option>
        <option value="phone">Phone</option>
      </select>
          
    </div>
    <button
      type="button"
      class="btn btn-secondary btn-sm m-2"
      (click)="addEmailFieldfunction()"
    >
      Add Alternate Emails
    </button>
    <p>
      Want to provide multiple email addresses? No problem! Click here to add
      more!
    </p>

    <button type="button" class="btn btn-secondary" (click)="load()">
      Load Data
    </button>
    <br />
    <br />
    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="registrationForm.invalid"
    >
      Submit
    </button>
  </form>
</div>
